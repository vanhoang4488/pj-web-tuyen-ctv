2022-09-27 13:32:23.831 INFO  [background-preinit] o.h.validator.internal.util.Version      : HV000001: Hibernate Validator 6.1.6.Final
 2022-09-27 13:32:24.565 INFO  [main] c.a.n.c.c.impl.LocalConfigInfoProcessor  : LOCAL_SNAPSHOT_PATH:C:\Users\Admin\nacos\config
 2022-09-27 13:32:24.604 INFO  [main] c.a.nacos.client.config.impl.Limiter     : limitTime:5.0
 2022-09-27 13:32:24.630 INFO  [main] c.a.nacos.client.config.utils.JvmUtil    : isMultiInstance:false
 2022-09-27 13:32:24.633 DEBUG [main] c.a.c.n.c.NacosPropertySourceBuilder     : Loading nacos data, dataId: 'gateway.properties', group: 'WEB_CTV', data: gateway.port=20000

gateway.application.name=gateway

gateway.context-path=/

gateway.redis.database=0
 2022-09-27 13:32:24.640 DEBUG [main] c.a.c.n.c.NacosPropertySourceBuilder     : Loading nacos data, dataId: 'admin.properties', group: 'WEB_CTV', data: 
admin.port=20003
admin.application.name=admin
admin.context-path=/

 2022-09-27 13:32:24.643 DEBUG [main] c.a.c.n.c.NacosPropertySourceBuilder     : Loading nacos data, dataId: 'content.properties', group: 'WEB_CTV', data: 
content.port=20008
content.application.name=content
content.context-path=/

# database
content.db.hostname=localhost
content.db.port=3306
content.db.database=wctv_content
content.db.username=root
content.db.password=thaibinh

#redis
content.redis.database=0
 2022-09-27 13:32:24.646 DEBUG [main] c.a.c.n.c.NacosPropertySourceBuilder     : Loading nacos data, dataId: 'manage.properties', group: 'WEB_CTV', data: 
manage.port=20008
manage.application.name=manage
manage.context-path=/

# database
manage.db.host=localhost
manage.db.port=3306
manage.db.database=wctv_manage
manage.db.username=root
manage.db.password=thaibinh

# redis
manage.redis.database=0
 2022-09-27 13:32:24.651 DEBUG [main] c.a.c.n.c.NacosPropertySourceBuilder     : Loading nacos data, dataId: 'upload.properties', group: 'WEB_CTV', data: 
upload.port=20005
upload.application.name=upload
upload.context-path=/

# database
upload.db.hostname=localhost
upload.db.port=3306
upload.db.database=wctv_upload
upload.db.username=root
upload.db.password=thaibinh

# redis
upload.redis.database=0

 2022-09-27 13:32:24.654 DEBUG [main] c.a.c.n.c.NacosPropertySourceBuilder     : Loading nacos data, dataId: 'library-major.properties', group: 'WEB_CTV', data: 
#logback-spring
logging.config=classpath:logback-spring.xml

# spring.datasource.drive-class-name
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
# có sử dụng unicode hay không?
userUnicode=true
# mã hóa ký tự
characterEncoding=UTF-8

# redis
common.redis.host=localhost
common.redis.port=4488
common.redis.password=thaibinh
common.redis.database=0

# gmail 
common.mail.host=smtp.gmail.com
common.mail.port=587
common.mail.username=taf.tac.kcalb@gmail.com
common.mail.password=piyuybfwomhktxyf
com.mail.stmp.auth=true
common.mail.transfer.protocol=stmp
common.mail.smtp.starttls.enable=true

# feign
common.hystrix.threadpool.core.size=10
common.hystrix.threadpool.maximum.size=15
common.hystrix.threadpool.maxQueue.size=200

 2022-09-27 13:32:24.658 WARN  [main] c.a.c.n.c.NacosPropertySourceBuilder     : Ignore the empty nacos configuration and get it based on dataId[library-major.properties.properties] & group[WEB_CTV]
 2022-09-27 13:32:24.661 WARN  [main] c.a.c.n.c.NacosPropertySourceBuilder     : Ignore the empty nacos configuration and get it based on dataId[library-major.properties-common-config-dev.properties] & group[WEB_CTV]
 2022-09-27 13:32:24.661 INFO  [main] b.c.PropertySourceBootstrapConfiguration : Located property source: [BootstrapPropertySource {name='bootstrapProperties-library-major.properties-common-config-dev.properties,WEB_CTV'}, BootstrapPropertySource {name='bootstrapProperties-library-major.properties.properties,WEB_CTV'}, BootstrapPropertySource {name='bootstrapProperties-library-major.properties,WEB_CTV'}, BootstrapPropertySource {name='bootstrapProperties-upload.properties,WEB_CTV'}, BootstrapPropertySource {name='bootstrapProperties-manage.properties,WEB_CTV'}, BootstrapPropertySource {name='bootstrapProperties-content.properties,WEB_CTV'}, BootstrapPropertySource {name='bootstrapProperties-admin.properties,WEB_CTV'}, BootstrapPropertySource {name='bootstrapProperties-gateway.properties,WEB_CTV'}]
 2022-09-27 13:32:24.680 INFO  [main] com.os.ApplyGatewayApplication           : The following profiles are active: common-config-dev
 2022-09-27 13:32:25.545 INFO  [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
 2022-09-27 13:32:25.547 INFO  [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
 2022-09-27 13:32:25.600 INFO  [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 27ms. Found 0 Redis repository interfaces.
 2022-09-27 13:32:25.843 INFO  [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=2ef09ca4-bc54-3075-80be-2c32689bd3fa
 2022-09-27 13:32:25.863 INFO  [main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
 2022-09-27 13:32:25.865 INFO  [main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactiveLoadBalancerConfig' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactiveLoadBalancerConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
 2022-09-27 13:32:25.868 INFO  [main] trationDelegate$BeanPostProcessorChecker : Bean 'deferringLoadBalancerExchangeFilterFunction' of type [org.springframework.cloud.client.loadbalancer.reactive.DeferringLoadBalancerExchangeFilterFunction] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
 2022-09-27 13:32:26.892 INFO  [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
 2022-09-27 13:32:26.893 INFO  [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
 2022-09-27 13:32:26.893 INFO  [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
 2022-09-27 13:32:26.893 INFO  [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
 2022-09-27 13:32:26.893 INFO  [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
 2022-09-27 13:32:26.893 INFO  [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
 2022-09-27 13:32:26.893 INFO  [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
 2022-09-27 13:32:26.893 INFO  [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
 2022-09-27 13:32:26.893 INFO  [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
 2022-09-27 13:32:26.893 INFO  [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
 2022-09-27 13:32:26.893 INFO  [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
 2022-09-27 13:32:26.893 INFO  [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
 2022-09-27 13:32:26.893 INFO  [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
 2022-09-27 13:32:28.962 WARN  [main] onfigReactiveWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'keyExpiredListener' defined in file [C:\Account\du_an\pj-web-tuyen-ctv\pj-web-tuyen-ctv\common-redis\target\classes\com\os\KeyExpiredListener.class]: Invocation of init method failed; nested exception is org.springframework.data.redis.RedisConnectionFailureException: Cannot get Jedis connection; nested exception is redis.clients.jedis.exceptions.JedisConnectionException: Failed connecting to localhost:4488
 2022-09-27 13:32:28.987 INFO  [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
 2022-09-27 13:32:29.025 ERROR [main] o.springframework.boot.SpringApplication : Application run failed
 
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'keyExpiredListener' defined in file [C:\Account\du_an\pj-web-tuyen-ctv\pj-web-tuyen-ctv\common-redis\target\classes\com\os\KeyExpiredListener.class]: Invocation of init method failed; nested exception is org.springframework.data.redis.RedisConnectionFailureException: Cannot get Jedis connection; nested exception is redis.clients.jedis.exceptions.JedisConnectionException: Failed connecting to localhost:4488
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1794)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:594)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:897)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:879)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:551)
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:62)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:758)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:750)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:405)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:315)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1237)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1226)
	at com.os.ApplyGatewayApplication.main(ApplyGatewayApplication.java:21)
Caused by: org.springframework.data.redis.RedisConnectionFailureException: Cannot get Jedis connection; nested exception is redis.clients.jedis.exceptions.JedisConnectionException: Failed connecting to localhost:4488
	at org.springframework.data.redis.connection.jedis.JedisConnectionFactory.fetchJedisConnector(JedisConnectionFactory.java:282)
	at org.springframework.data.redis.connection.jedis.JedisConnectionFactory.getConnection(JedisConnectionFactory.java:476)
	at org.springframework.data.redis.listener.KeyspaceEventMessageListener.init(KeyspaceEventMessageListener.java:85)
	at org.springframework.data.redis.listener.KeyspaceEventMessageListener.afterPropertiesSet(KeyspaceEventMessageListener.java:137)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1853)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1790)
	... 17 common frames omitted
Caused by: redis.clients.jedis.exceptions.JedisConnectionException: Failed connecting to localhost:4488
	at redis.clients.jedis.Connection.connect(Connection.java:170)
	at redis.clients.jedis.BinaryClient.connect(BinaryClient.java:113)
	at redis.clients.jedis.BinaryJedis.connect(BinaryJedis.java:2024)
	at org.springframework.data.redis.connection.jedis.JedisConnectionFactory.fetchJedisConnector(JedisConnectionFactory.java:277)
	... 22 common frames omitted
Caused by: java.net.SocketTimeoutException: connect timed out
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at redis.clients.jedis.DefaultJedisSocketFactory.createSocket(DefaultJedisSocketFactory.java:53)
	at redis.clients.jedis.Connection.connect(Connection.java:163)
	... 25 common frames omitted

